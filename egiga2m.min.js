var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,d){a.raw=d;return a};
var version="1.15.13",visited=[],activePoint=-1,mychart=-1,myPlot=-1,myRequest,myStart,myStop,exportURL="undefined",plotURL="undefined",jsonURL="undefined",exportFormat="csv",exportBlanks="",exportDecimation="",curves,myPlotClass=[],myHistory=[],myHistoryCounter=-1,plotService="./lib/service/plot_service.php?conf=",treeService="./lib/service/tree_service.php?conf=",updateService="",exportService="./lib/service/export_service.php?conf=",hcExportService="http://export.highcharts.com",zoom_speed=document.getElementById("zoomFactor")?
document.getElementById("zoomFactor").value:10,globalVal,globalLabel,minVal,maxVal,tsLabel,animationDelay,frameNum,updatePlot=0,decimation="maxmin",decimationSamples=1E3,updateBackground=300,updateRequest="",updateDecimation=0,updateCounter=0,updateId=!1,downtimeCheck=!1,visible=[],flotOptions={series:{lines:{show:!0}},grid:{hoverable:!0,clickable:!0},xaxis:{tickLength:5},yaxis:{position:"left"},legend:{position:"sw"},canvas:!0},fade_level=[];for(j=0;j<events.length;j++)fade_level[events[j]]=1;
var $_GET=getQueryParams(document.location.search);"undefined"!==typeof $_GET.conf?(document.getElementById("conf").value=$_GET.conf,initConf($_GET.conf)):initConf(!1);"undefined"!==typeof $_GET.visible&&(visible=$_GET.visible.split(";"));"undefined"!==typeof $_GET.decimation&&(decimation=$_GET.decimation);"undefined"!==typeof $_GET.hideOverMaxmin&&document.getElementById("hideOverMaxmin")&&(document.getElementById("hideOverMaxmin").checked=!0);
"undefined"!==typeof $_GET.downtimeCheck&&(downtimeCheck=!0);document.getElementById("downtimeCheck")&&(document.getElementById("downtimeCheck").checked=downtimeCheck);document.getElementById("decimation_"+decimation)&&(document.getElementById("decimation_"+decimation).selected=!0);"undefined"!==typeof $_GET.decimation_samples&&(decimationSamples=$_GET.decimation_samples);document.getElementById("decimationSamples")&&(document.getElementById("decimationSamples").value=decimationSamples);
"boolean"!==typeof isHighChartsInstalled&&document.getElementById("show_flot")&&(document.getElementById("show_flot").checked=!0,document.getElementById("show_hc").checked=!1,document.getElementById("show_error").checked=!1,document.getElementById("style_output").style.display="none");"undefined"===typeof formula_edit&&initPlot($_GET);"undefined"!==typeof window.$_GET.tsLabel&&(tsLabel=window.$_GET.tsLabel.split(";"));initTree($_GET);
"string"===typeof see_also&&document.getElementById("see_also")&&(document.getElementById("see_also_button").style.display="inline");function update_see_also(){var a={"\x3c!--start--\x3e":document.getElementById("startInput").value,"\x3c!--stop--\x3e":document.getElementById("stopInput").value,"\x3c!--decimation--\x3e":decimation};document.getElementById("see_also").innerHTML=strtr(see_also,a)}
function popup(a,d,g){this.popupWindow=null;this.open=function(){this.popupWindow?this.popupWindow.closed?this.popupWindow=window.open(a,d,g):this.popupWindow.focus():this.popupWindow=window.open(a,d,g)}}if("undefined"!==typeof $_GET.formula){var myPopup=new popup("./formula_editor.html?conf="+$_GET.conf,"formula","width=670,height=800");myPopup.open()}
function print_r(a){var d=new popup("","mywindow","width=600,height=400");d.open();if(a.constructor==Array||a.constructor==Object){d.popupWindow.document.write("<ul>");for(var g in a)a[g].constructor==Array||a[g].constructor==Object?(d.popupWindow.document.write("<li>["+g+"] => "+typeof a+"</li>"),d.popupWindow.document.write("<ul>"),print_r(a[g]),d.popupWindow.document.write("</ul>")):d.popupWindow.document.write("<li>["+g+"] => "+a[g]+"</li>");d.popupWindow.document.write("</ul>")}}
function openFormula(){(new popup("./formula_editor.html?conf="+document.getElementById("conf").value,"formula","width=670,height=800")).open()}function returnFormula(a){document.getElementById("ts").value=a+";"+document.getElementById("ts").value}var hidden,visibilityChange;
"undefined"!==typeof document.hidden?(hidden="hidden",visibilityChange="visibilitychange"):"undefined"!==typeof document.mozHidden?(hidden="mozHidden",visibilityChange="mozvisibilitychange"):"undefined"!==typeof document.msHidden?(hidden="msHidden",visibilityChange="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(hidden="webkitHidden",visibilityChange="webkitvisibilitychange");var videoElement=document.getElementById("videoElement");
function handleVisibilityChange(){updateDecimation=document[hidden]?Math.ceil(updateBackground/updatePlot):updateDecimation=0}"undefined"===typeof document.addEventListener||"undefined"===typeof document[hidden]?alert("This feature requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API."):document.addEventListener(visibilityChange,handleVisibilityChange,!1);
function updateLink(a){var d="";if(document.getElementById("ts").value.length)d="&ts="+document.getElementById("ts").value;else{var g=[];$("#tree").fancytree("getTree").visit(function(r){r.folder||("./img/y1axis.png"==r.data.icon&&g.push(r.key+",1,1"),"./img/y2axis.png"==r.data.icon&&g.push(r.key+",1,2"),"./img/surface.png"==r.data.icon&&g.push(r.key+",surface"),"./img/animation.png"==r.data.icon&&g.push(r.key+",animation"),"./img/multi.png"==r.data.icon&&g.push(r.key+",multi"))});g.length&&(d="&ts="+
g.join(";"))}var h="";document.getElementById("start").value.length?h="&start="+document.getElementById("start").value:document.getElementById("startInput").value.length&&(h="&start="+document.getElementById("startInput").value);var e="";document.getElementById("stop").value.length?e="&stop="+document.getElementById("stop").value:document.getElementById("startInput")&&document.getElementById("startInput").value.length&&(e="&stop="+document.getElementById("stopInput").value);var b=document.getElementById("conf").value.length?
"conf="+document.getElementById("conf").value:"conf=",k="",l=document.getElementById("minY").value;1<l.length&&(k="&minY="+l);l=document.getElementById("maxY").value;1<l.length&&(k+="&maxY="+l);l=document.getElementById("logY").value;""!=l&&"0;0"!=l&&(k+="&logY="+l);var m=document.getElementById("style").value;m.length&&(m="&style="+m);var q=document.getElementById("height").value;q.length&&(q="&height="+q);l=document.getElementById("show_flot").checked?"&show_flot=true":"";var v=document.getElementById("show_table").checked?
"&show_table=true":"",w="undefined"!==typeof location.pathname?location.pathname:"undefined"!==typeof window.location.pathname?window.location.pathname:"undefined"!==typeof document.location.pathname?document.location.pathname:"./egiga2m.html";path=w.split("/");var u="";for(j=0;j<events.length;j++)u+=document.getElementById("show_"+events[j]).checked?"&show_"+events[j]+"="+document.getElementById("filter_"+events[j]).value:"";var p=window.location.protocol+"//"+window.location.host+path.join("/");
path[path.length-1]=-1==w.indexOf(".html")?path[path.length-1]+"index_plot.html":path[path.length-1].replace(".html","_plot.html");plotURL=window.location.protocol+"//"+window.location.host+path.join("/");path.pop();0==exportService.indexOf("./")&&(exportService=window.location.protocol+"//"+window.location.host+path.join("/")+exportService.substr(1));exportURL=exportService+h+e+d;var n=document.getElementById("downtimeCheck").checked?"&downtimeCheck=true":"",B="maxmin"!==decimation?"&decimation="+
decimation:"",D=1E3!=decimationSamples?"&decimationSamples="+decimationSamples:"",z=document.getElementById("hideOverMaxmin")&&document.getElementById("hideOverMaxmin").checked?"&hideOverMaxmin=true":"";w=b+h+e+d;k=k+m+q+B+D+n+z;jsonURL=window.location.protocol+"//"+window.location.host+path.join("/")+plotService.substr(1)+h+e+d+k;d=window.location.protocol+"//"+window.location.host+path.join("/")+treeService.substr(1)+h+e+d+k;if("undefined"!==typeof a){if("history"==a)return w+k+""+l+v;window.location=
p+"?"+b+h+e+"&ts="+a+k+l+v}else document.getElementById("plotOnly").setAttribute("onClick","javascript: location='"+plotURL+"?"+w+k+l+v+u+"'"),document.getElementById("plotOnly").innerHTML=plotURL+"?"+w+k+l+v+u,document.getElementById("plotAndControls").setAttribute("onClick","javascript: location='"+p+"?"+w+k+l+v+u+"'"),document.getElementById("plotAndControls").innerHTML=p+"?"+w+k+l+v+u,document.getElementById("scratch")&&(document.getElementById("scratch").setAttribute("onClick","javascript: location='"+
p+"?"+b+"'"),document.getElementById("scratch").innerHTML=p+"?"+b),exportBlanks=document.getElementById("exportZoh").checked?"&zoh":document.getElementById("exportFoh").checked?"&foh":"",exportFormat=document.getElementById("exportCsv").checked?"csv":"",exportFormat=document.getElementById("exportXls").checked?"xlsx":exportFormat,exportFormat=document.getElementById("exportMat").checked?"mat":exportFormat,exportFormat=document.getElementById("exportIgor").checked?"itx":exportFormat,exportFormat=document.getElementById("exportJson")&&
document.getElementById("exportJson").checked?"json":exportFormat,exportDecimation=evalExportDecimation(),refreshExportLink(),document.getElementById("exportCsv").setAttribute("onClick","javascript: exportFormat = 'csv';document.getElementById('matDisabled').style.display='inline'; refreshExportLink();"),document.getElementById("exportXls").setAttribute("onClick","javascript: exportFormat = 'xlsx';document.getElementById('matDisabled').style.display='inline'; refreshExportLink();"),document.getElementById("exportMat")&&
document.getElementById("exportMat").setAttribute("onClick","javascript: exportFormat = 'mat';document.getElementById('matDisabled').style.display='none'; refreshExportLink();"),document.getElementById("exportIgor")&&document.getElementById("exportIgor").setAttribute("onClick","javascript: exportFormat = 'itx';document.getElementById('matDisabled').style.display='inline'; refreshExportLink();"),document.getElementById("exportJson")&&(document.getElementById("exportJson").setAttribute("onClick","javascript: exportFormat = 'json';document.getElementById('matDisabled').style.display='none'; refreshExportLink();"),
document.getElementById("exportJson").innerHTML=jsonURL),document.getElementById("exportTreeJson")&&(document.getElementById("exportTreeJson").setAttribute("onClick","javascript: location='"+d+"'"),document.getElementById("exportTreeJson").innerHTML=d),document.getElementById("exportBlanks").setAttribute("onClick","javascript: exportBlanks = '';refreshExportLink();"),document.getElementById("exportZoh").setAttribute("onClick","javascript: exportBlanks = '&zoh';refreshExportLink();"),document.getElementById("exportFoh").setAttribute("onClick",
"javascript: exportBlanks = '&foh';refreshExportLink();"),document.getElementById("exportSamplesNumber").setAttribute("onChange","javascript: exportDecimation = evalExportDecimation();refreshExportLink();"),document.getElementById("exportMaxmin").setAttribute("onClick","javascript: exportDecimation = evalExportDecimation();refreshExportLink();"),document.getElementById("exportMean").setAttribute("onClick","javascript: exportDecimation = evalExportDecimation();refreshExportLink();"),document.getElementById("exportAvg").setAttribute("onClick",
"javascript: exportDecimation = evalExportDecimation();refreshExportLink();"),document.getElementById("tsLabel").setAttribute("onChange","javascript: refreshExportLink();"),document.getElementById("nullValue").setAttribute("onChange","javascript: refreshExportLink();"),document.getElementById("timestamp").setAttribute("onChange","javascript: refreshExportLink();"),document.getElementById("multiParam").value=plotURL+"?"+w+k+l+u}
function getFormattedDate(a){a=new Date(a);var d=a.getMonth()+1,g=a.getDate(),h=a.getHours(),e=a.getMinutes(),b=a.getSeconds();d=(10>d?"0":"")+d;g=(10>g?"0":"")+g;h=(10>h?"0":"")+h;e=(10>e?"0":"")+e;b=(10>b?"0":"")+b;return a.getFullYear()+"-"+d+"-"+g+" "+h+":"+e+":"+b}
function previous_period(){var a=document.getElementById("startInput").value,d=document.getElementById("stopInput").value;if(19==a.length&&-1==a.indexOf("last")){var g=a.substring(0,10)+"T"+a.substring(11);if(19==d.length&&-1==d.indexOf("last")){var h=d.substring(0,10)+"T"+d.substring(11);h=(new Date(h)).getTime()-(new Date(g)).getTime();document.getElementById("stopInput").value=a;document.getElementById("startInput").value=getFormattedDate((new Date(g)).getTime()-h)}2>d.length&&(document.getElementById("stopInput").value=
a,document.getElementById("startInput").value=getFormattedDate((new Date(g)).getTime()-864E5))}-1!==a.indexOf("last")&&(a=a.split(" "),a[1]*=2,document.getElementById("startInput").value=a.join(" "))}
function following_period(){var a=document.getElementById("startInput").value,d=document.getElementById("stopInput").value;if(19==a.length&&-1==a.indexOf("last")){var g=a.substring(0,10)+"T"+a.substring(11);if(19==d.length&&-1==d.indexOf("last")){var h=d.substring(0,10)+"T"+d.substring(11),e=(new Date(h)).getTime()-(new Date(g)).getTime();document.getElementById("startInput").value=d;document.getElementById("stopInput").value=getFormattedDate((new Date(h)).getTime()+e)}2>d.length&&(document.getElementById("stopInput").value=
getFormattedDate((new Date(g)).getTime()+864E5))}-1!==a.indexOf("last")&&(a=a.split(" "),a[1]=Math.round(a[1]/2),document.getElementById("startInput").value=a.join(" "))}
function evalExportDecimation(){var a="";if(document.getElementById("exportMaxmin").checked||document.getElementById("exportMean").checked||document.getElementById("exportAvg").checked)a="&decimation=",0<document.getElementById("exportSamplesNumber").value&&(a+=document.getElementById("exportSamplesNumber").value),document.getElementById("exportMaxmin").checked&&(a+=",maxmin"),document.getElementById("exportMean").checked&&(a+=",mean"),document.getElementById("exportAvg").checked&&(a+=",avg");return a}
function refreshExportLink(){document.getElementById("timestampBlock").style.display="inline";console.log("itx",document.getElementById("exportIgor").checked);document.getElementById("exportIgor").checked&&(document.getElementById("timestampBlock").style.display="none");var a=document.getElementById("tsLabel").value.length?"&tsLabel="+document.getElementById("tsLabel").value:"";a+=document.getElementById("nullValue").value.length?"&nullValue="+document.getElementById("nullValue").value:"";a+=document.getElementById("timestamp").checked?
"&timestamp":"";"json"===exportFormat?(document.getElementById("exportLink").innerHTML=jsonURL,document.getElementById("exportLink").setAttribute("onClick","javascript: location='"+jsonURL+"'")):(expu=exportURL+"&format="+exportFormat+exportBlanks+exportDecimation+a,console.log(expu,expu.split("&").join("&amp;")),document.getElementById("exportLink").innerHTML=expu.split("&").join("&amp;"),document.getElementById("exportLink").setAttribute("onClick","javascript: location='"+exportURL+"&format="+exportFormat+
exportBlanks+exportDecimation+a+"'"))}
function plotCallback(){activePoint=-1;animationDelay=0;document.getElementById("placeholder").style.border="0px";decimationSamples=document.getElementById("decimationSamples")?document.getElementById("decimationSamples").value:"maxmin";decimation=document.getElementById("decimation")?document.getElementById("decimation").value:1E3;myPlotClass=[];document.getElementById("startInput").value.length&&(document.getElementById("start").value=document.getElementById("startInput").value);start=document.getElementById("start").value;
document.getElementById("stop").value=document.getElementById("stopInput").value;stop=document.getElementById("stop").value;var a=!1,d=[];$("#tree").fancytree("getTree").visit(function(h){h.folder||("./img/y1axis.png"==h.data.icon&&d.push(h.key+",1,1"),"./img/y2axis.png"==h.data.icon&&d.push(h.key+",1,2"),"./img/multi.png"==h.data.icon&&d.push(h.key+",multi"),"./img/surface.png"==h.data.icon&&(plotSurfaceTs(h.key,start,stop),d.push(h.key+",surface"),a=!0,document.getElementById("animationControls").style.display=
"none"),"./img/animation.png"==h.data.icon&&(document.getElementById("animationControls").style.display="inline",frameNum=0,document.getElementById("show_flot").checked&&(flotAnimationTs(h.key,start,stop),d.push(h.key+",animation"),a=!0),document.getElementById("show_hc").checked&&(hcAnimationTs(h.key,start,stop),d.push(h.key+",animation"),a=!0)))});var g=d.join(";");document.getElementById("ts").value=g;a||(document.getElementById("animationControls").style.display="none");!1!==updateId&&(clearInterval(updateId),
updateId=!1);document.getElementById("hidetree").style.display="inline";a||plotTs(g,start,stop);add_history(0)}
function initPlot(a){$("#tree").width($("#configContainer").width());for(j=0;j<events.length;j++)"undefined"!==typeof a["show_"+events[j]]&&(document.getElementById("show_"+events[j]).checked=!0,a["show_"+events[j]].length&&"1"!==a["show_"+events[j]]&&(document.getElementById("filter_"+events[j]).value=a["show_"+events[j]]));"undefined"!==typeof a.minY&&(document.getElementById("minY").value=a.minY);"undefined"!==typeof a.maxY&&(document.getElementById("maxY").value=a.maxY);"undefined"!==typeof a.logY&&
(document.getElementById("logY").value=a.logY);"undefined"!==typeof a.height&&(document.getElementById("height").value=a.height);"undefined"!==typeof a.style&&(document.getElementById("style").value=a.style);if("undefined"!==typeof a.start&&"undefined"!==typeof a.ts){document.getElementById("placeholder").style.border="0px";var d=a.start;document.getElementById("start").value=d;document.getElementById("startInput")&&(document.getElementById("startInput").value=d);var g="";"undefined"!==typeof a.stop?
(g=a.stop,document.getElementById("stopInput")&&(document.getElementById("stopInput").value=g),document.getElementById("stop").value=g):(document.getElementById("stopInput")&&(document.getElementById("stopInput").value=""),document.getElementById("stop").value="");var h=a.ts;0<=h.indexOf("surface")?(h=h.split(","),plotSurfaceTs(h[0],d,g)):0<=h.indexOf("animation")?(h=h.split(","),document.getElementById("animationControls").style.display="inline","undefined"!==typeof a.show_flot?flotAnimationTs(h[0],
d,g):hcAnimationTs(h[0],d,g)):(document.getElementById("hidetree")&&(document.getElementById("hidetree").style.display="inline"),"undefined"!==typeof document.getElementById("ts")&&(document.getElementById("ts").value=h),"undefined"!==typeof a.show_flot&&document.getElementById("show_flot")&&(document.getElementById("show_flot").checked=!0,document.getElementById("show_hc").checked=!1),"undefined"!==typeof a.show_table&&document.getElementById("show_table")&&(document.getElementById("show_table").checked=
!0),plotTs(h,d,g),add_history(0))}}
function initTree(a){if($("#tree").length){var d=treeService,g=$(window).height()-320;150>g&&(g=150);"undefined"===typeof formula_edit&&$(tree).width(250).height(g);"undefined"!==typeof a.ts&&(d=d+"&ts="+a.ts);$("#tree").fancytree({autoScroll:!0,source:{url:d},lazyLoad:function(h,e){e.result={url:treeService,data:{key:e.node.key}}},click:function(h,e){if("icon"==e.targetType||"title"==e.targetType)"undefined"===typeof formula_edit?(e.node.data.isArray?"./img/y0axis.png"==e.node.data.icon?(e.node.data.icon=
"./img/surface.png",e.node.data.tooltip="surface display"):"./img/surface.png"==e.node.data.icon?(e.node.data.icon="./img/animation.png",e.node.data.tooltip="animation display"):"./img/animation.png"==e.node.data.icon?(e.node.data.icon="./img/multi.png",e.node.data.tooltip="multi line display"):"./img/multi.png"==e.node.data.icon&&(e.node.data.icon="./img/y0axis.png",e.node.data.tooltip="not selected"):e.node.data.isString?"./img/y0axis.png"==e.node.data.icon?(e.node.data.icon="./img/table.png",e.node.data.tooltip=
"show table"):"./img/table.png"==e.node.data.icon&&(e.node.data.icon="./img/y0axis.png",e.node.data.tooltip="not selected"):"./img/y0axis.png"==e.node.data.icon?(e.node.data.icon="./img/y1axis.png",e.node.data.tooltip="show on Y1 axis"):"./img/y1axis.png"==e.node.data.icon?(e.node.data.icon="./img/y2axis.png",e.node.data.tooltip="show on Y2 axis"):"./img/y2axis.png"==e.node.data.icon&&(e.node.data.icon="./img/y0axis.png",e.node.data.tooltip="not selected"),e.node.data.tooltip="click to switch display mode",
e.node.render(!0),e.node.parent.sortChildren()):$.get(treeService+"&reversekey="+e.node.key,function(b){b.length&&append2formula('"'+b+'"')});return!0},clickFolderMode:2,persist:!0});updateLink()}}
function switchtree(){if("<img src='./img/right.png'>"==document.getElementById("hidetree").InnerHTML){document.getElementById("hidetree").InnerHTML="<img src='./img/y0axis.png'>";$("body").find("#hidetree").html("<img src='./img/y0axis.png'>");document.getElementById("treeid").style.display="inline";var a=$(window).width()-280}else document.getElementById("hidetree").InnerHTML="<img src='./img/right.png'>",$("body").find("#hidetree").html("<img src='./img/right.png'>"),document.getElementById("treeid").style.display=
"none",a=$(window).width()-30;300>a&&(a=300);$("#mybackground").width(a).height(height-0+10+"px");$("#placeholder").width(a-10).height(height+"px");rePlotTs()}function rePlotTs(){document.getElementById("height").value.length?document.getElementById("height"):$(window).height();document.getElementById("show_flot")&&document.getElementById("show_flot").checked?(myPlot.resize(),myPlot.draw()):myPlot.reflow()}
function applyConf(){document.getElementById("minY").value=document.getElementById("minY1set").value+";"+document.getElementById("minY2set").value;document.getElementById("maxY").value=document.getElementById("maxY1set").value+";"+document.getElementById("maxY2set").value;document.getElementById("logY").value=(document.getElementById("logY1set").checked?"1":"0")+";"+(document.getElementById("logY2set").checked?"1":"0");document.getElementById("style").value=document.getElementById("styleSet").value}
function updateConf(){minY=document.getElementById("minY").value.split(";");maxY=document.getElementById("maxY").value.split(";");logY=document.getElementById("logY").value.split(";");document.getElementById("minY1set").value=minY[0];document.getElementById("maxY1set").value=maxY[0];document.getElementById("logY1set").checked="1"==logY[0];document.getElementById("minY2set").value="undefined"===typeof minY[1]?"":minY[1];document.getElementById("maxY2set").value="undefined"===typeof maxY[1]?"":maxY[1];
document.getElementById("logY2set").checked="1"==logY[1];document.getElementById("style_scatter").selected="scatter"==document.getElementById("style").value;document.getElementById("style_step").selected="step"==document.getElementById("style").value;document.getElementById("style_line").selected="line"==document.getElementById("style").value;document.getElementById("style_spline").selected="spline"==document.getElementById("style").value}
function updateAbout(){$("body").find("#aboutVersion").html(version)}function applySearch(){var a=[];for(i=0;i<document.getElementById("Y1search").length;i++)document.getElementById("Y1search").options[i].selected&&a.push(document.getElementById("Y1search").options[i].value);for(j=0;j<document.getElementById("Y2search").length;j++)document.getElementById("Y2search").options[j].selected&&a.push(document.getElementById("Y2search").options[j].value+",1,2");updateLink(a.join(";"))}
function mysearch(){searched=document.getElementById("search").value;$.get(treeService+"&search="+searched,function(a){var d="",g;for(g in a)d+='<option value="'+g+'">'+a[g]+"</option>";$("body").find("#Y1search").html(d);$("body").find("#Y2search").html(d)})}
function change_flot(){document.getElementById("show_flot").checked&&(document.getElementById("show_hc").checked=!1);document.getElementById("style_item")&&(document.getElementById("style_item").style.display=document.getElementById("show_hc").checked?"inline":"none")}function change_hc(){document.getElementById("show_hc").checked&&(document.getElementById("show_flot").checked=!1);document.getElementById("style_item").style.display=document.getElementById("show_hc").checked?"inline":"none"}
function csvCallback(){ts=document.getElementById("ts").value;start=document.getElementById("start").value;stop=document.getElementById("stop").value;csvTs(ts,start,stop)}function pngCallback(){Canvas2Image.saveAsPNG(myPlot.getCanvas())}function getQueryParams(a){a=a.split("+").join(" ");for(var d={},g,h=/[?&]?([^=]+)=([^&]*)/g;g=h.exec(a);)d[decodeURIComponent(g[1])]=decodeURIComponent(g[2]);return d}
function handleFileSelect(a){var d=document.getElementById("height").value.length?document.getElementById("height").value:$(window).height()-200;$("#mybackground").width($("#plotContainer").width()).height(d-0+10+"px");$("#placeholder").width($("#plotContainer").width()-10).height(d+"px");document.getElementById("placeholder").style.border="0px";a.stopPropagation();a.preventDefault();a=a.dataTransfer.files[0];d=new FileReader;d.onload=function(g){return function(h){lines=h.target.result.split("\n");
val=lines[0].split(",");col_number=val.length-1;for(var e=1,b=0;b<col_number;b++)myPlotClass[b]=[],myPlotClass[b].data=[],document.getElementById("show_hc")&&document.getElementById("show_hc").checked?myPlotClass[b].name=$.isNumeric(val[b+1])?"ts1"+b:val[b+1].replace(/&deg;/g,"\u00b0"):(myPlotClass[b].lines={show:!0,fill:!1},myPlotClass[b].label=$.isNumeric(val[b+1])?"ts1"+b:val[b+1]),"Y"==val[b+1].substring(0,1)&&$.isNumeric(val[b+1].substring(1,2))&&(myPlotClass[b].yAxis=val[b+1].substring(1,2)-
1,myPlotClass[b].yaxis=val[b+1].substring(1,2)-0,e<val[b+1].substring(1,2)&&(e=val[b+1].substring(1,2)));var k=-1;h=document.getElementById("show_table")&&document.getElementById("show_table").checked;for(var l='<table class="table table-striped table-bordered table-condensed" width="100%"><thead><tr><th>timestamp</th>',m=0;m<col_number;m++)l+="<th>"+myPlotClass[m].label+"</th>";l+="</tr></thead><tbody>";for(var q=m=0;q<lines.length;q++)if(val=lines[q].split(","),!(2>val.length)){if($.isNumeric(val[0]))timestamp=
val[0],b=new Date(1E3*val[0]);else if(0<=val[0].indexOf("-"))b=val[0].split(" "),b=new Date(b[0]+"T"+b[1]),timestamp=b.getTime()/1E3;else continue;if($.isNumeric(timestamp)&&0<timestamp){k++;0==m&&(m=1E3*timestamp);l+="<tr><td>"+b.toLocaleString()+"</td>";for(b=0;b<col_number;b++)l+="<td>"+val[b+1]+"</td>",""!==val[b+1]&&(myPlotClass[b].data[k]=[1E3*timestamp,parseFloat(val[b+1])]);l+="</tr>"}}stop=1E3*timestamp;if(document.getElementById("show_hc")&&document.getElementById("show_hc").checked){k=
"step";document.getElementById("style")&&document.getElementById("style").value.length&&(k=document.getElementById("style").value);k={chart:{renderTo:document.getElementById("placeholder"),type:"line",height:800},title:{text:"eGiga2m"},xAxis:{type:"datetime"},yAxis:[],tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%d/%m/%Y %H:%M:%S}: {point.y:.9f} "},type:"step"==k?"line":k,series:myPlotClass};Highcharts.setOptions({global:{useUTC:!1}});for(m=1;m<=e;m++)k.yAxis[m-1]={title:{text:"Y"+
m},opposite:2==e&&2==m};myPlot=e=new Highcharts.Chart(k)}else document.getElementById("show_flot")&&document.getElementById("show_flot").checked?(e={series:{lines:{show:!0}},grid:{hoverable:!0,clickable:!0},xaxis:{zoomRange:[.01,12E7],panRange:[m,stop],mode:"time",tickLength:5},yaxes:[{},{position:"right"}],legend:{position:"nw"},canvas:!0},myPlot=e=$.plot($("#placeholder"),myPlotClass,e)):($("#mybackground").height("1px"),$("#placeholder").height("1px"),document.getElementById("placeholder").innerHTML=
"");l+="</tbody></table>";document.getElementById("tableContainer").innerHTML=h?l:"";document.getElementById("pngCallback").style.display="inline"}}(a);d.readAsText(a)}
function handleTreeSelect(a){a.stopPropagation();a.preventDefault();attr=extractTimeseries(a.dataTransfer.getData("text"));addTs="copy"==a.dataTransfer.dropEffect;$.get(treeService+"&searchkey="+attr,function(d){"undefined"!==typeof d[0]&&(console.log(document.getElementById("ts").value),d=addTs&&document.getElementById("ts").value.length?document.getElementById("ts").value+";"+d[0]:d[0],updateLink(d),document.getElementById("ts").value=d)})}
function handleDragOver(a){a.stopPropagation();a.preventDefault();a.dataTransfer.dropEffect="plot"}var dropZone=document.getElementById("plotContainer");dropZone.addEventListener("dragover",handleDragOver,!1);dropZone.addEventListener("drop",handleFileSelect,!1);if($("#tree").length){var dropTree=document.getElementById("tree");dropTree.addEventListener("dragover",handleDragOver,!1);dropTree.addEventListener("drop",handleTreeSelect,!1)}
function fillTable(a){var d="",g=[],h=[];d='<br><table class="table table-striped table-bordered table-condensed" width="100%"><thead><tr><th>time</th>';for(var e=0,b=0;b<a.length;b++)"clone"!=b&&"undefined"!==typeof a[b].label&&(e=b-0+1);for(b=0;b<a.length;b++)if("clone"!=b&&"undefined"!==typeof a[b].label){d+="<th>"+a[b].label+"</th>";for(var k=0;k<a[b].data.length;k++)"undefined"!==typeof a[b].data[k][0]&&("undefined"===typeof g[a[b].data[k][0]]&&(g[a[b].data[k][0]-0]=Array(e),h.push(a[b].data[k][0]-
0)),g[a[b].data[k][0]][b]=a[b].data[k][1])}d+="</tr></thead>\n<tbody>\n";h.sort(function(l,m){return l-m});for(k=0;k<h.length;k++)if(h[k]-0==h[k]&&"undefined"!==typeof h[k]&&"clone"!=h[k]){d+="<tr>";d+="<td>"+(new Date(h[k])).format("Y-m-d H:i:s")+"</td>";for(b=0;b<e;b++)d+="<td>"+("undefined"!==typeof g[h[k]]&&"undefined"!==typeof g[h[k]][b]?g[h[k]][b]:"&nbsp;")+"</td>";d+="</tr>\n"}d+="</tbody></table>";document.getElementById("tableContainer")&&(document.getElementById("tableContainer").innerHTML=
d)}function timeZoom(a,d,g){g=(g-a)/zoom_speed;a=1;864E6<g?a=864E5:3456E5<g?a=216E5:108E5<g?a=36E5:9E5<g&&(a=6E4);g=Math.round(g/a)*a;a*=Math.round((d-g/2)/a);d=new Date(a+g);return[(new Date(a)).format("Y-m-d H:i:s"),d.format("Y-m-d H:i:s")]}
function add_history(a){if(!(-1>myHistoryCounter+a&&myHistoryCounter+a>=myHistory.length)){myHistoryCounter+=a;if(0==a)myHistoryCounter+=1,myHistory.length=myHistoryCounter,myHistory[myHistoryCounter]=updateLink("history");else{a=getQueryParams(myHistory[myHistoryCounter]);plotTs(a.ts,a.start,"undefined"===typeof a.stop?"":a.stop);var d=["minY","maxY","logY","height","style"];for(c=0;c<d.length;c++)document.getElementById(d[c]).value="undefined"===typeof a[d[c]]?"":a[d[c]]}document.getElementById("myBack").style.display=
1>myHistoryCounter?"none":"inline";document.getElementById("myFwd").style.display=myHistoryCounter==myHistory.length-1?"none":"inline"}}function decodeTs(a){for(var d=a.split(";"),g=0;g<d.length;g++){var h=d[g].split(",");curves[g]={request:h[0],x:h[1],y:h[2],response:h[0]}}return a}
function newdecodeTs(a){a=a.split(";");for(var d=[],g=[],h=[],e,b=0;b<a.length;b++){e=-1;var k=a[b].split(",");"undefined"===typeof k[1]&&(k[1]=1);"undefined"===typeof k[2]&&(k[2]=1);if(-1<k[0].indexOf("$"))for(var l=k[0].split("$"),m=0;m<l.length;m++)m%2&&-1==g.indexOf(l[m]+","+k[1])&&(g.push(l[m]+","+k[1]),h.push(l[m]));else e=d.push(k[0]+","+k[1])-1;curves[b]={request:k[0],x:k[1],y:k[2],response:0<=e?e:h}}return d.concat($(g).not(d).get()).join(";")}function SortByTime(a,d){return a.x-d.x}
function strtr(a,d){var g,h;for(h in d)for(g="";a!==g;)g=a,a=g.replace(h,d[h]);return a}function mathEval(a){var d=!0;a=a.replace(/(?:[a-z$_][a-z0-9$_]*)|(?:[;={}\[\]"'!&<>^\\?:])/ig,function(g){if(Math.hasOwnProperty(g))return"Math."+g;d=!1});if(!d)return NaN;try{return eval(a)}catch(g){return NaN}}function evalFormulae(a){return a}
function plotTs(a,d,g){curves=[];myRequest=a;var h="";for(j=0;j<events.length;j++)h+=document.getElementById("show_"+events[j]).checked?"&show_"+events[j]+"="+document.getElementById("filter_"+events[j]).value:"";h=h+"&decimation="+decimation+"&decimation_samples="+decimationSamples;console.log(document.getElementById("hideOverMaxmin").checked);if(document.getElementById("hideOverMaxmin")&&document.getElementById("hideOverMaxmin").checked){h+="&hideOverMaxmin=";var e=document.getElementById("maxY").value;
1<e.length&&(h+="&maxY="+e);e=document.getElementById("minY").value;1<e.length&&(h+="&minY="+e)}e=document.getElementById("height").value.length?document.getElementById("height").value:$(window).height()-200;300>e&&(e=300);var b=$(window).width()-(0<$("#tree").length?280:0);300>b&&(b=300);$("#mybackground").width(b).height(e-0+10+"px");$("#placeholder").width(b-10).height(e+"px");$("#placeholder").html("&nbsp;&nbsp;&nbsp;&nbsp;<img src='./img/timer.gif'>");e="start="+d;b="";updatePlot=0;0<=g.indexOf("update")?
(b=g.split(","),updatePlot="undefined"===typeof b[1]?1:.1<b[1]?b[1]:.1,updateBackground="undefined"===typeof b[2]?300:60<b[2]?b[2]:60,b="&no_posttimer="):g.length&&(b="&stop="+g);var k=document.getElementById("show_hc").checked?"&prestart=hc":"";a=decodeTs(a);var l=g.length?new Date(g):new Date;$.get(plotService+"&Seconds_Behind_Master",function(m){60<m&&alert("WARNING\nThe data has not been updated for "+m+" seconds")});1>a.length?$("#placeholder").html("&nbsp;&nbsp;&nbsp;&nbsp;<h4>WARNING: No Time Series has been requested</h4>Please select e Time Series and a time period"):
$.get(plotService+"&"+e+b+"&ts="+a+k+h,function(m){for(var q=0,v=0;v<m.ts.length;v++)q+=m.ts[v].num_rows;0==q&&$("#placeholder").html("&nbsp;&nbsp;&nbsp;&nbsp;<h4>WARNING: No data available</h4>Please select e Time Series and a time period containing some data");console.log("num_rows: "+q);if(document.getElementById("downtimeCheck")&&document.getElementById("downtimeCheck").checked){v=m.ts[0].data[0].x?m.ts[0].data[0].x:m.ts[0].data[0][0];for(var w=[],u=0;u<m.ts.length;u++)q+=m.ts[u].num_rows,(l.valueOf()-
m.ts[u].data[m.ts[u].data.length-1][0])/(l.valueOf()-v)>10/m.ts[u].data.length&&w.push(m.ts[u].label);w.length&&alert("WARNIG\nsome data may be missing (may be server or replication downtime) for Time Series:\n"+w.join(","))}plotData(evalFormulae(m.ts),m.event,d,g)})}
function plotData(a,d,g,h){g=g.split(";");h=h.split(";");document.getElementById("show_hc").checked?(hcPlot(a,d,g,h),document.getElementById("pngCallback").style.display="none"):document.getElementById("show_flot").checked?(flotPlot(a,d,g,h),document.getElementById("pngCallback").style.display="inline"):($("#mybackground").height("1px"),$("#placeholder").height("1px"),document.getElementById("placeholder").innerHTML="");if(document.getElementById("show_table").checked)fillTable(a);else{d=0;tableData=
[];for(h=0;h<a.length;h++)a[h].isString&&(tableData[d++]=a[h]);d&&fillTable(tableData)}}
function flotPlot(a,d,g,h){d={series:{lines:{show:!0}},grid:{hoverable:!0,clickable:!0},xaxes:[{zoomRange:[.01,12E7],panRange:[13700376E5,14015736E5],mode:"time",timezone:"browser",tickLength:5}],yaxes:[{},{position:"right"}],legend:{position:"sw"},canvas:!0};myPlotClass=[];for(var e=document.getElementById("minY")&&document.getElementById("minY").value.length?document.getElementById("minY").value.split(";"):[],b=document.getElementById("maxY")&&document.getElementById("maxY").value.length?document.getElementById("maxY").value.split(";"):
[],k=document.getElementById("logY")&&document.getElementById("logY").value.length?document.getElementById("logY").value.split(";"):[],l=1,m=1,q=0;q<a.length;q++)"undefined"!==typeof a[q].label&&(myPlotClass[q]=[],myPlotClass[q].label=a[q].label,myPlotClass[q].xaxis=a[q].xaxis-0,myPlotClass[q].yaxis=a[q].yaxis-0,myPlotClass[q].data=a[q].data,myPlotClass[q].lines={show:!0,fill:!1},l<a[q].xaxis&&(l=a[q].xaxis),m<a[q].yaxis&&(m=a[q].yaxis));for(a=1;a<=m;a++)k[a-1]&&"1"==k[a-1]?(d.yaxes[a-1].transform=
function(v){return 0<v?Math.log(v):-23},d.yaxes[a-1].inverseTransform=function(v){return Math.exp(v)}):(d.yaxis||(d.yaxis=[]),d.yaxis[a-1]={},e[a-1]&&(d.yaxis[a-1].min=e[a-1]),b[a-1]&&(d.yaxis[a-1].max=b[a-1]));myPlot=$.plot($("#placeholder"),myPlotClass,d);$("#placeholder").append('<div style="position:absolute;left:120px;top:10px;color:#676;font-size:smaller">eGiga2m - '+g+" - "+h+"</div>");document.getElementById("pngCallback")&&(document.getElementById("pngCallback").style.display="inline");document.getElementById("hidetree")&&
(document.getElementById("hidetree").style.display="inline")}function showTooltip(a,d,g){$('<div id="tooltip">'+g+"</div>").css({position:"absolute",display:"none",top:d+5,left:a+5,border:"1px solid #fdd",padding:"2px","background-color":"#fee",opacity:.8}).appendTo("body").fadeIn(200)}var previousPoint=null;
$("#placeholder").bind("plothover",function(a,d,g){"undefined"!==typeof d.x&&$("#x").text(d.x.toFixed(2));"undefined"!==typeof d.y&&$("#y").text(d.y.toFixed(2));g?previousPoint!=g.dataIndex&&(previousPoint=g.dataIndex,$("#tooltip").remove(),showTooltip(g.pageX,g.pageY,"&nbsp;&nbsp;"+g.datapoint[1]+"<br>&nbsp;&nbsp;"+(new Date(g.datapoint[0]-0)).toLocaleString())):($("#tooltip").remove(),previousPoint=null)});
$("#placeholder").bind("plotclick",function(a,d,g){if(document.getElementById("startInput")){for(a=0;"undefined"===typeof myPlotClass[0].data[a][0];)a++;startStop=timeZoom(myPlotClass[0].data[a][0],d.x,myPlotClass[0].data[myPlotClass[0].data.length-1][0]);document.getElementById("startInput").value=document.getElementById("start").value=startStop[0];document.getElementById("stopInput").value=document.getElementById("stop").value=startStop[1];plotTs(myRequest,startStop[0],startStop[1]);add_history(0)}else document.location=
"./index.html"+document.location.search});var printing=!1;
function hcPlot(a,d,g,h){var e="No data available in selected period",b=document.getElementById("height").value.length?document.getElementById("height").value:$(window).height()-200;300>b&&(b=300);var k="step",l=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],m=document.getElementById("minY")&&document.getElementById("minY").value.length?document.getElementById("minY").value.split(";"):[],q=document.getElementById("maxY")&&document.getElementById("maxY").value.length?document.getElementById("maxY").value.split(";"):
[],v=document.getElementById("logY")&&document.getElementById("logY").value.length?document.getElementById("logY").value.split(";"):[];document.getElementById("style")&&document.getElementById("style").value.length&&(k=document.getElementById("style").value);var w=1,u=1,p;for(p in curves)u<curves[p].y&&(u=curves[p].y);var n=0;for(p=0;p<events.length;p++)document.getElementById("event_"+events[p]).style.display="none";myPlotClass=[];for(p in curves)if("clone"!=p)if(a)for(;a[n]&&a[n].ts_id.split("[")[0]==
curves[p].request;){var B=a[n].query_time?a[n].query_time:0,D=0<B?", Samples per second: "+(a[n].num_rows/B).toFixed(0):"";B="Samples: "+a[n].data.length+(a[n].num_rows>a[n].data.length?"/"+a[n].num_rows:"")+(a[n].query_time?", query time: "+B.toFixed(2)+" [s]"+D:"");"undefined"!==typeof z&&"undefined"!==typeof z[n]||a[n].label.replace(/&deg;/g,"\u00b0");myPlotClass.push({shortName:"undefined"!==typeof z&&"undefined"!==typeof z[n]?z[n]:(1<u?"Y"+(curves[p].y?curves[p].y:1)+" ":"")+a[n].label.replace(/&deg;/g,
"\u00b0"),name:'<span title="'+B+'">'+("undefined"!==typeof z&&"undefined"!==typeof z[n]?z[n]:(1<u?"Y"+(curves[p].y?curves[p].y:1)+" ":"")+a[n].label.replace(/&deg;/g,"\u00b0"))+"</span>",xAxis:a[n].xaxis-1,yAxis:$.isNumeric(curves[p].y)?curves[p].y-1:0,data:a[n].data,visible:"undefined"!==typeof visible[n]?"true"==visible[n]:!0,step:"step"==k?"left":!1});w<a[n].xaxis&&(w=a[n].xaxis);"undefined"!==typeof a[n].categories&&(l[a[n].yaxis-1]=a[n].categories);a[n].ranges&&myPlotClass.push({name:"Range",
data:a[n].ranges,type:"arearange",lineWidth:0,linkedTo:":previous",color:Highcharts.getOptions().colors[n],fillOpacity:.5,zIndex:0,marker:{enabled:!1}});n++}else e="No variable selected";for(p in d)"clone"!=p&&"undefined"!==typeof fade_level[p]&&"undefined"===typeof d[p].label&&(myPlotClass.push({name:p,showInLegend:!1,xAxis:0,yAxis:0,data:d[p].data,type:"scatter",step:!1}),document.getElementById("event_"+p).style.display="inline");if("undefined"!==typeof window.$_GET.tsLabel){var z=window.$_GET.tsLabel.split(";");
for(p in a)myPlotClass[p].name="undefined"!==typeof z[p]?z[p]:z[0]}e={credits:{enabled:!1},exporting:{url:hcExportService},legend:{useHTML:!0},chart:{events:{beforePrint:function(){window.printing=!0},afterPrint:function(){window.printing=!0},click:function(r){if(!window.printing)if($("#plotContainer").width(),document.getElementById("startInput")){for(var x=0;"undefined"===typeof myPlotClass[0].data[x][0];)x++;startStop=timeZoom(myPlotClass[0].data[x][0],r.xAxis[0].value,myPlotClass[0].data[myPlotClass[0].data.length-
1][0]);document.getElementById("startInput").value=document.getElementById("start").value=startStop[0];document.getElementById("stopInput").value=document.getElementById("stop").value=startStop[1];plotTs(myRequest,startStop[0],startStop[1]);add_history(0)}else document.location=document.location.pathname.match(/[^\/]+$/)[0].replace("_plot.html",".html")+document.location.search;window.printing=!1},load:function(){if(updatePlot&&0!=updateService.length){for(var r=[],x=0;x<myPlotClass.length;x++)if("clone"!=
x){var t=myPlotClass[x].shortName;"Y"==t.substring(0,1)&&$.isNumeric(t.substring(1,2))&&(t=t.substring(3));r[x]=t}updateRequest=updateService+r.join(",");updateId=setInterval(function(){if(updateDecimation){if(0<updateCounter){updateCounter--;return}updateCounter=updateDecimation}$.get(updateRequest,function(A){for(var C in A)"clone"!=C&&15E11<A[C][0]&&myPlot.series[C].addPoint(A[C],!0,!1)})},1E3*updatePlot)}}},renderTo:placeholder,type:"step"==k?"line":k,height:b},title:{text:"eGiga2m"},plotOptions:{series:{animation:!updatePlot}},
xAxis:[],yAxis:[],tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%d/%m/%Y %H:%M:%S}: {point.y:.3f} ",formatter:function(){if(-1==activePoint)activePoint=0;else{activePoint=this.series.data.indexOf(this.point);for(var r=new Date(this.x),x="",t=0;t<myPlotClass.length;t++){myPlotClass[t].name==this.series.name&&this.x==myPlotClass[t].data[0].x&&"undefined"!==typeof myPlotClass[t].data[0].prestart&&(r=new Date(myPlotClass[t].data[0].prestart),x=" pre-start");if(myPlotClass[t].name==
this.series.name&&"error"==this.series.name)for(var A in myPlotClass[t].data)if(myPlotClass[t].data[A].x==this.x)return"<b>error</b><br><br>"+a[myPlotClass[t].data[A].message].label+"<br>"+r.format("Y-m-d H:i:s")+x+": <b><br>"+d.error.message[myPlotClass[t].data[A].message]+"</b>";if(myPlotClass[t].name==this.series.name&&"undefined"!==typeof fade_level[this.series.name])for(A in myPlotClass[t].data)if(myPlotClass[t].data[A].x==this.x)return"<b>"+this.series.name+"</b><br>"+r.format("Y-m-d H:i:s")+
": <b><br>"+d[this.series.name].message[myPlotClass[t].data[A].message]+"</b>";myPlotClass[t].name==this.series.name&&this.x==myPlotClass[t].data[myPlotClass[t].data.length-1].x&&"undefined"!==typeof myPlotClass[t].data[myPlotClass[t].data.length-1].poststart&&this.tooltip.hide()}return"<b>"+this.series.name+"</b><br>"+r.format("Y-m-d H:i:s")+x+": <b>"+this.y+"</b>"}}},lang:{noData:e},noData:{style:{fontWeight:"bold",fontSize:"15px",color:"#303030"}},series:myPlotClass};for(b=1;b<=w;b++)e.xAxis[b-
1]={type:"datetime",gridLineWidth:0,lineColor:"#000",title:{text:g[b-1]+" - "+h[b-1]},opposite:2==w&&2==b};"undefined"!==typeof window.$_GET.hideMenu&&(e.navigation={buttonOptions:{enabled:!1}});if("undefined"!==typeof window.$_GET.xShow)for(n=window.$_GET.xShow.split(";"),b=1;b<=w;b++)"0"==("undefined"!==typeof n[b-1]?n[b-1]:n[0])&&(e.xAxis[b-1].lineWidth=0,e.xAxis[b-1].labels={enabled:!1});if("undefined"!==typeof window.$_GET.xLabel||"undefined"!==typeof window.$_GET.xlabel)for(n=("undefined"!==
typeof window.$_GET.xLabel?window.$_GET.xLabel:window.$_GET.xlabel).split(";"),b=1;b<=w;b++)e.xAxis[b-1].title={text:"undefined"!==typeof n[b-1]?n[b-1]:n[0]};"undefined"!==typeof window.$_GET.title&&(e.title={text:window.$_GET.title});for(b=e.xAxis[0].gridLineWidth=1;b<=u;b++)e.yAxis[b-1]={title:{text:"Y"+(b?b:1)},opposite:2==u&&2==b},m[b-1]&&(e.yAxis[b-1].min=m[b-1]),q[b-1]&&(e.yAxis[b-1].max=q[b-1]),v[b-1]&&"1"==v[b-1]&&(e.yAxis[b-1].type="logarithmic"),e.yAxis[b-1].labels={formatter:function(){return this.value}},
l[b-1]&&(e.yAxis[b-1].categories=l[b-1]);if("undefined"!==typeof window.$_GET.yLabel)for(l=window.$_GET.yLabel.split(";"),b=1;b<=u;b++)e.yAxis[b-1].title={text:"undefined"!==typeof l[b-1]?l[b-1]:l[0]?l[0]:""};else{ylab=[];for(p in curves)"clone"!=p&&(ylab[a[p].yaxis]?ylab[a[p].yaxis].push(a[p].display_unit):ylab[a[p].yaxis]=[a[p].display_unit]);for(n=1;n<ylab.length;n++){lab=ylab[n][0];for(u=1;u<ylab[n].length;u++)if(lab!=ylab[n][u]){lab=ylab[n].join(" - ");break}e.yAxis[n-1].title={text:"Y"+n+" - "+
lab}}}Highcharts.setOptions({global:{useUTC:!1}});myPlot=new Highcharts.Chart(e,function(r){-1!=mychart?mychart=this:(mychart=this,$(document).keydown(function(x){var t="undefined"===typeof mychart.hoverSeries?0:mychart.hoverSeries.index;switch(x.which){case 37:0<activePoint&&activePoint--;break;case 39:activePoint+1<mychart.series[t].data.length&&activePoint++}"undefined"!==typeof mychart.series[t]&&mychart.tooltip.refresh(mychart.series[t].data[activePoint])}))});for(b in myPlotClass)!1===myPlotClass[b].showInLegend&&
($("#event_"+myPlotClass[b].name).off("click"),$("#event_"+myPlotClass[b].name).click({name:b,label:myPlotClass[b].name},function(r){myPlotClass[r.data.name].name!==r.data.label||myPlotClass[r.data.name].done||(myPlot.series[r.data.name].setVisible(),fade_level[r.data.label]=1.5-fade_level[r.data.label],$("#event_"+r.data.label).fadeTo(400,fade_level[r.data.label]))}))}
function flotFrameTs(){if(frameNum>=globalVal.length)animationDelay=0;else if(0!=animationDelay){var a=new Date(globalVal[frameNum][0]-0);$("body").find("#animationTime").html(a.format("Y-m-d H:i:s"));myPlotClass=[[]];myPlotClass[0].label=globalLabel;myPlotClass[0].data=globalVal[frameNum][1];myPlotClass[0].lines={show:!0,fill:!1};flotOptions.yaxis={position:"left",min:minVal,max:maxVal};$.plot($("#placeholder"),myPlotClass,flotOptions);$("#animationSlider").slider("value",frameNum);frameNum++;animationDelay&&
setTimeout(function(){flotFrameTs()},animationDelay)}}
function flotAnimationTs(a,d,g){$("#animationSlider").width($("#plotContainer").width()-20);globalVal=[];d="start="+d+"&decimation="+decimation+"&decimation_samples="+decimationSamples;var h="";g.length&&(h="&stop="+g);$.get(plotService+"&"+d+h+"&ts="+a+"&no_pretimer&no_posttimer",function(e){minVal=maxVal=e.ts[0].data[0][1][0];globalLabel=e.ts[0].label;for(var b,k=0;k<e.ts[0].data.length;k++){globalVal[k]=[e.ts[0].data[k][0],[]];for(var l=0;l<e.ts[0].data[k][1].length;l++)b=e.ts[0].data[k][1][l],
globalVal[k][1][l]=[l,b],minVal>b&&(minVal=b),maxVal<b&&(maxVal=b)}e=(maxVal-minVal)/20;maxVal+=e;minVal-=e;$("#animationSlider").slider({range:!1,min:0,max:globalVal.length-1});$("#animationSlider").slider({stop:function(m,q){frameNum=q.value;flotFrameTs()}});animationDelay=100;frameNum=0;setTimeout(function(){flotFrameTs()},10)})}
function hcFrameTs(){if(frameNum>=globalVal.length)animationDelay=0;else if(0!=animationDelay){var a=new Date(globalVal[frameNum][0]-0);$("body").find("#animationTime").html(a.format("Y-m-d H:i:s"));a=document.getElementById("placeholder");var d="step";document.getElementById("style")&&document.getElementById("style").value.length&&(d=document.getElementById("style").value);a={chart:{renderTo:a,type:"step"==d?"line":d,height:800},title:{text:"eGiga2m"},plotOptions:{series:{animation:!1}},yAxis:[{title:{text:"Y"},
labels:{formatter:function(){return 1E-5===this.value?0:this.value}}}],series:[{name:globalLabel,step:"step"==d?"left":!1,data:globalVal[frameNum][1]}]};a.yAxis[0].min=minVal;a.yAxis[0].max=maxVal;Highcharts.setOptions({global:{useUTC:!1}});new Highcharts.Chart(a);$("#animationSlider").slider("value",frameNum);frameNum++;animationDelay&&setTimeout(function(){hcFrameTs()},animationDelay)}}
function hcAnimationTs(a,d,g){$("#animationSlider").width($("#plotContainer").width()-20);globalVal=[];d="start="+d+"&decimation="+decimation+"&decimation_samples="+decimationSamples;var h="";g.length&&(h="&stop="+g);$.get(plotService+"&"+d+h+"&ts="+a+"&no_pretimer&no_posttimer",function(e){minVal=maxVal=e.ts[0].data[0][1][0];globalLabel=e.ts[0].label;for(var b,k=0;k<e.ts[0].data.length;k++){globalVal[k]=[e.ts[0].data[k][0],[]];for(var l=0;l<e.ts[0].data[k][1].length;l++)b=e.ts[0].data[k][1][l],globalVal[k][1][l]=
[l,b],minVal>b&&(minVal=b),maxVal<b&&(maxVal=b)}e=(maxVal-minVal)/20;maxVal+=e;minVal-=e;$("#animationSlider").slider({range:!1,min:0,max:globalVal.length-1});animationDelay=100;frameNum=0;$("#animationSlider").slider({stop:function(m,q){frameNum=q.value;hcFrameTs()}});setTimeout(function(){hcFrameTs()},10)})}function stopAnimation(){frameNum=animationDelay=0;$("#animationSlider").slider("value",frameNum)}function pauseAnimation(){animationDelay=0}
function playAnimation(){0==animationDelay&&(document.getElementById("show_flot").checked&&setTimeout(function(){flotFrameTs()},10),document.getElementById("show_hc").checked&&setTimeout(function(){hcFrameTs()},10));animationDelay=100}function ffAnimation(){0==animationDelay?(animationDelay=50,document.getElementById("show_flot").checked&&setTimeout(function(){flotFrameTs()},10),document.getElementById("show_hc").checked&&setTimeout(function(){hcFrameTs()},10)):animationDelay/=2}
var surfacePlot,data,options,basicPlotOptions,glOptions,animated,plot1,values=[],times=[];
function plotSurfaceTs(a,d,g){var h="";g.length&&(h="&stop="+g);$.get(plotService+"&start="+d+h+"&ts="+a+"&no_pretimer&no_posttimer",function(e){for(var b=e.ts[0].data.length,k=Math.round(b/5),l=0;l<b;l++)0==l%k&&(times[l/k]=(new Date(e.ts[0].data[l][0]-0)).format("Y-m-d H:i:s")),values[l]=e.ts[0].data[l][1];e=values[0].length;data={nRows:b,nCols:e,formattedValues:values};$("#placeholder").empty();surfacePlot=new SurfacePlot(document.getElementById("placeholder"));basicPlotOptions={fillPolygons:!0,
tooltips:[],renderPoints:!0};b=[];k=1;20<e&&(k=Math.round(e/10));for(l=0;l<=e;l+=k)b[l/k]=l;glOptions={xLabels:times,yLabels:b,chkControlId:"allowWebGL",autoCalcZScale:!0,animate:!1};options={xPos:0,yPos:0,width:1200,height:800,colourGradient:[{red:0,green:0,blue:255},{red:0,green:255,blue:255},{red:0,green:255,blue:0},{red:255,green:255,blue:0},{red:255,green:0,blue:0}],xTitle:"",yTitle:"samples",zTitle:"values",backColour:"#f8f8f8",axisTextColour:"#000000",hideFlatMinPolygons:!1,origin:{x:600,y:400}};
surfacePlot.draw(data,options,basicPlotOptions,glOptions)})};
