<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="./favicon.ico">

	<title>eGiga2m</title>
	<!-- todo: set fancytree-container size dynamically -->
	<style type="text/css">
		ul.fancytree-container {
			width: 210px;
			height: 100%;
			overflow: auto;
			position: relative;
		}
	</style>


	<!-- use json serializer in order to debug -->
	<script src="./lib/json/json2.js"></script>

	<!-- Bootstrap core CSS -->
	<link href="./lib/bootstrap/bootstrap.css" rel="stylesheet">
	<!-- Bootstrap theme -->
	<link href="./lib/bootstrap/bootstrap-theme.css" rel="stylesheet">
	<!-- Custom styles for egiga2m -->
	<link href="./lib/bootstrap/egiga2m.css" rel="stylesheet">


	<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
	<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
	<script src="./lib/bootstrap/ie-emulation-modes-warning.js"></script>

	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<script src="./lib/bootstrap/ie10-viewport-bug-workaround.js"></script>

	<style type="text/css" id="holderjs-style"></style>

  
	<!-- WebGL_Surface_Plot
	================================================== -->
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
	<!--[if IE]><script type="text/javascript" src="./lib/WebGL_Surface_Plot/excanvas.js"></script><![endif]-->
	<script type="text/javascript" src='./lib/WebGL_Surface_Plot/SurfacePlot.js'></script>
	<script type="text/javascript" src='./lib/WebGL_Surface_Plot/ColourGradient.js'></script>
	<script type="text/javascript" src="./lib/WebGL_Surface_Plot/glMatrix-0.9.5.min.js"></script>
	<script type="text/javascript" src="./lib/WebGL_Surface_Plot/webgl-utils.js"></script>

	<script id="shader-fs" type="x-shader/x-fragment">
		#ifdef GL_ES
		precision highp float;
		#endif
		
		varying vec4 vColor;
		varying vec3 vLightWeighting;
		
		void main(void)
		{
			gl_FragColor = vec4(vColor.rgb * vLightWeighting, vColor.a);
		}
	</script>
	
	<script id="shader-vs" type="x-shader/x-vertex">
		attribute vec3 aVertexPosition;
		attribute vec3 aVertexNormal;
		attribute vec4 aVertexColor;
		
		uniform mat4 uMVMatrix;
		uniform mat4 uPMatrix;
		uniform mat3 uNMatrix;
		varying vec4 vColor;
		
		uniform vec3 uAmbientColor;
		uniform vec3 uLightingDirection;
		uniform vec3 uDirectionalColor;
		varying vec3 vLightWeighting;
		
		void main(void)
		{
			gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
			
			vec3 transformedNormal = uNMatrix * aVertexNormal;
			float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);
			vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting; 

			vColor = aVertexColor;
		}
	</script>

	<script id="axes-shader-fs" type="x-shader/x-fragment">
		precision mediump float;
		varying vec4 vColor;
		
		void main(void)
		{
			gl_FragColor = vColor;
		}
	</script>
	
	<script id="axes-shader-vs" type="x-shader/x-vertex">
		attribute vec3 aVertexPosition;
		attribute vec4 aVertexColor;
		uniform mat4 uMVMatrix;
		uniform mat4 uPMatrix;
		varying vec4 vColor;
		uniform vec3 uAxesColour;
		
		void main(void)
		{
			gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
			vColor =  vec4(uAxesColour, 1.0);
		} 
	</script>

	<script id="texture-shader-fs" type="x-shader/x-fragment">
		#ifdef GL_ES
		precision highp float;
		#endif

		varying vec2 vTextureCoord;

		uniform sampler2D uSampler;

		void main(void)
		{
			gl_FragColor = texture2D(uSampler, vTextureCoord);
		}
	</script>

	<script id="texture-shader-vs" type="x-shader/x-vertex">
		attribute vec3 aVertexPosition;

		attribute vec2 aTextureCoord;
		varying vec2 vTextureCoord;

		uniform mat4 uMVMatrix;
		uniform mat4 uPMatrix;

		void main(void)
		{
			gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
			vTextureCoord = aTextureCoord; 
		}
	</script>
</head>

<body>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">eGiga2m</a>
			</div>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li><a data-toggle="modal" data-target="#linkModal" onClick="updateLink()">Link &amp; Export</a></li>
					<li><a data-toggle="modal" data-target="#confModal" onClick="updateConf()">Config</a></li>
					<li><a href="#"><input type='text' id='search' style='color: blue' placeholder="Search"> <input type="button" data-toggle="modal" data-target="#searchModal" onClick="mysearch()" value='Search' style='color: black'></a></li>
					<li><a data-toggle="modal" data-target="#aboutModal" onClick="updateAbout()">About</a></li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
	</nav>

	<div class="container" style='width: 100%'>
		<div class="row">
			<div class="col-lg-2" id='configContainer'>
				<div class="row">
					<div class="input-group">
						<span class="input-group-addon">start</span>
						<input type="text" class="tcal" placeholder="YYYY-MM-DD [hh:mm:ss]" id='startInput' size='18' onKeyPress='editCallback()'>
					</div>
					<div class="input-group">
						<span class="input-group-addon">stop</span>
						<input type="text" class="tcal" placeholder="YYYY-MM-DD [hh:mm:ss]" id='stopInput' size='18' onKeyPress='editCallback()'>
					</div>
				</div>
				<div class="row">	
					<div class="input-group">
						<div id="tree" style="width: 250px;height: 600px"> </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp
					</div>
				</div>
				<div class="row">	
					<div class="input-group">
						&nbsp;<br>&nbsp;<br>
					</div>
					<div class="input-group">
						<div class="col-lg-12">
						 <table><tr><td>
							<div class="input-group">
								<span class="input-group-btn">
									<button class="btn btn-default" type="button" id='myBack' style='display:none'>&lt;</button>
									<button class="btn btn-default" type="button" onClick="plotCallback()">show</button>
									<button class="btn btn-default" type="button" id='myFwd' style='display:none'>&gt;</button><br>
								</span>
							</div><!-- /input-group -->
						 </td><td>&nbsp;&nbsp;&nbsp;</td><!--td>
							<div class="checkbox"> <label> <input type="checkbox" onChange="change_flot()" id='show_flot'> Flot</label> </div>
							<div class="checkbox"> <label> <input type="checkbox" onChange="change_hc()" id='show_hc' checked> HighChart</label> </div>
							<div class="checkbox"> <label> <input type="checkbox" id='show_table'> table</label> </div>
						 </td--></tr></table>
							<br><button class="btn btn-default" type="button" onClick="pngCallback()" id="pngCallback" style="display:none">export to png</button>
							&nbsp;<!--button class="btn btn-default" type="button" onClick="csvCallback()" id="pngCallback">csv</button-->
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-10" id='plotContainer'>
			 <table><tr valign='top'><td><div id='hidetree' onClick='hidetree()' style = 'display:none'><img src='./img/left.png'></div></td><td>
				<table><tr><td>
				<div id='mybackground' style='float:left;border-width:10;background-color: white;width:1110px;height:810px;'>
					<div id='placeholder' style='width:1100px;height:800px;border-style:dashed;border-width:thin;border-color:black;'>
						&nbsp;&nbsp;&nbsp;<span style="cursor:pointer;color:#909090;font-size:20px;fill:#909090;">Drop here a CSV file</span>
					</div>
				</div></td></tr>
				<tr><td>
				<div id='legendContainer' style='position: relative; text-align: center;'>
					<span id='event_new' style='cursor: pointer; display: none;'><img src='./img/New.png'>&nbsp;New</span>&nbsp;&nbsp;&nbsp;
					<span id='event_first' style='cursor: pointer; display: none;'><img src='./img/First.png'>&nbsp;First quarter</span>&nbsp;&nbsp;&nbsp;
					<span id='event_full' style='cursor: pointer; display: none;'><img src='./img/Full.png'>&nbsp;Full</span>&nbsp;&nbsp;&nbsp
					<span id='event_last' style='cursor: pointer; display: none;'><img src='./img/Last.png'>&nbsp;Last Quarter</span>
				</div>
				</td></tr>
				<tr><td><table id="animationControls" style = 'display:none'>
					<tr><td><div id="animationSlider"></div></td></tr>
					<tr><td>&nbsp;</td></tr>
					<tr><td><span id='animationTime'></span>&nbsp;&nbsp;
						<span id='animationButtons'>
							<button class='btn btn-primary' onClick='stopAnimation()'><img src='./img/stop.png' width='18'></button>&nbsp;
							<button class='btn btn-primary' onClick='pauseAnimation()'><img src='./img/pause.png' width='18'></button>&nbsp;
							<button class='btn btn-primary' onClick='playAnimation()'><img src='./img/play.png' width='18'></button>&nbsp;
							<button class='btn btn-primary' onClick='ffAnimation()'><img src='./img/forward.png' width='18'></button>
						</span></td></tr>
				</table></td></tr>
				<tr><td>
				<div id='tableContainer' style='position: relative;'></div>
				</td></tr><tr><td>&nbsp;<br>&nbsp;<br>&nbsp;<br>
				</td></tr></table>
			 </td></tr></table>
			</div>
		</div>
	</div>

<!-- Modal -->
<div class="modal fade" id="linkModal" tabindex="-1" role="dialog" aria-labelledby="linkModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" style='width: 120%;'>
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="linkModalLabel">Link &amp; Export</h4>
			</div>
			<div class="modal-body">
				&nbsp;&nbsp;plot only<br><a id='plotOnly'>not available jet</a><br><br>
				&nbsp;&nbsp;plot and controls<br><a id='plotAndControls'">not available jet</a><br><br>
				&nbsp;&nbsp;csv export<br><a id='exportCsv'>not available jet</a><br><br>
				&nbsp;&nbsp;xls export<br><a id='exportXls'>not available jet</a><br><br>
				&nbsp;&nbsp;<form method="get" action="./multiplot.html">multiplot &nbsp;&nbsp; rows <input type="text" name="multi_rows" value="2" size="1">&nbsp;&nbsp;columns <input type="text" name="multi_cols" value="1" size="1">
				&nbsp;&nbsp;<span id="advanced" style="display:none">width <input type="text" name="multi_width" size="3">&nbsp;&nbsp;height <input type="text" name="multi_height" value="500" size="3"></span>&nbsp;&nbsp;
				<input type="hidden" name="multi_param" id="multiParam">&nbsp;&nbsp;<input type="submit" value="submit"></form>
				<button onClick="document.getElementById('advanced').style.display='inline'">advanced</button><br><br>
			</div>
			<div class="modal-footer">
				<div class="pull-left">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" style='width: 800px;'>
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="searchModalLabel">Search results</h4>
			</div>
			<div class="modal-body">
				<table>
					<tr><td>&nbsp;&nbsp;</td><td>Y1 axis</td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td>Y2 axis</td></tr>
					<tr><td></td><td><select id='Y1search' size='20' multiple></select></td><td></td><td><select id='Y2search' size='20' multiple></select></td></tr> 
				</table>
			</div>
			<div class="modal-footer">
				<div class="pull-left">
					<button type="button" class="btn btn-default" data-dismiss="modal" onClick="applySearch()">show</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="confModal" tabindex="-1" role="dialog" aria-labelledby="confModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" style='width: 800px;'>
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="confModalLabel">Configurations</h4>
			</div>
			<div class="modal-body">
				<table>
					<tr><td>&nbsp;&nbsp;</td><td><label>Y1 axis</label></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><label>Y2 axis</label></td></tr>
					<tr><td colspan='5'>&nbsp;</td></tr>
					<tr><td>&nbsp;&nbsp;<label>Min</label></td><td><input type="text" class="span3" name='minY1' id='minY1set'></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><input type="text" class="span3" name='minY2' id='minY2set'></td></tr>
					<tr><td colspan='5'>&nbsp;</td></tr>
					<tr><td>&nbsp;&nbsp;<label>Max</label></td><td><input type="text" class="span3" name='maxY1' id='maxY1set'></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><input type="text" class="span3" name='maxY2' id='maxY2set'></td></tr>
					<tr><td colspan='5'>&nbsp;</td></tr>
					<tr><td>&nbsp;&nbsp;<label>Logarithmic</label>&nbsp;&nbsp;</td><td><input type="checkbox" name='logY1' id='logY1set'></td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td><td><input type="checkbox" name='logY2' id='logY2set'></td></tr>
				</table><br><br>
				&nbsp;&nbsp;<label>Style</label> &nbsp;&nbsp;&nbsp;
				<select id='styleSet'> 
					<option id='style_scatter' value='scatter'>scatter</option> 
					<option id='style_step' value='step'>step</option> 
					<option id='style_line' value='line'>linear</option> 
					<option id='style_spline' value='spline'>spline</option> 
				</select>&nbsp;&nbsp;(HighChart only)
				<br><br>&nbsp;&nbsp;<label>Select output</label> &nbsp;&nbsp;&nbsp;
				<div class="checkbox">
					<label> <input type="checkbox" onChange="change_flot()" id='show_flot'> Flot</label>
					<label> <input type="checkbox" onChange="change_hc()" id='show_hc' checked> HighChart</label>
					<label> <input type="checkbox" id='show_table'> table</label><br><br><br>
					Moon phase &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<label id='event_select_new'> <input type="checkbox" id='show_new' checked> <img src='./img/New.png'> New</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<label id='event_select_first'> <input type="checkbox" id='show_first'> <img src='./img/First.png'> First Quarter</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<label id='event_select_full'> <input type="checkbox" id='show_full'> <img src='./img/Full.png'> Full</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
					<label id='event_select_last'> <input type="checkbox" id='show_last'> <img src='./img/Last.png'> Last quarter</label><br>
				</div>
			</div>
			<div class="modal-footer">
				<div class="pull-left">
					<button type="button" class="btn btn-default" data-dismiss="modal" onClick="applyConf()">apply</button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content" style='width: 800px;'>
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="aboutModalLabel">eGiga2m</h4>
			</div>
			<div class="modal-body">
				&nbsp;&nbsp;<label>eGiga2m</label> is synonym of <label>eGiga--</label><br><br>
				&nbsp;&nbsp;Version:&nbsp;&nbsp;&nbsp;&nbsp;<span id='aboutVersion'></span><br><br>
				&nbsp;&nbsp;<label>E</label>lectronic<br>
				&nbsp;&nbsp;<label>G</label>raphic<br>
				&nbsp;&nbsp;<label>I</label>nterface<br>
				&nbsp;&nbsp;for<br>
				&nbsp;&nbsp;<label>G</label>lobal<br>
				&nbsp;&nbsp;<label>A</label>rchiving<br>
				&nbsp;&nbsp;<label>-&nbsp;&nbsp;m</label>inus <br>
				&nbsp;&nbsp;<label>-&nbsp;&nbsp;m</label>inus <br><br>
				&nbsp;&nbsp;The -- means:<br>
				&nbsp;- less time to display plot and tree<br>
				&nbsp;- less source code and configuration options (most old options was removed because they had become useless)<br>
			</div>
			<div class="modal-footer">
				<div class="pull-left">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>

	<input type='hidden' id='conf'>
	<input type='hidden' id='ts'>
	<input type='hidden' id='start'>
	<input type='hidden' id='stop'>
	<input type='hidden' id='minY'>
	<input type='hidden' id='maxY'>
	<input type='hidden' id='logY'>
	<input type='hidden' id='height'>
	<input type='hidden' id='style'>

	<!-- Placed at the end of the document so the pages load faster -->

	<!-- jquery -->
	<link rel="stylesheet" href="./lib/jquery/jquery-ui.min.css">
	<script src="./lib/jquery/jquery.min.js" type="text/javascript"></script>
	<script src="./lib/jquery/jquery-ui.min.js" type="text/javascript"></script>

	<!-- Bootstrap core JavaScript -->
	<script src="./lib/bootstrap/bootstrap.js"></script>
	<script src="./lib/bootstrap/docs.js"></script>
  
	<!-- fancytree -->
	<link href="./lib/fancytree-2.3.0/src/skin-lion/ui.fancytree.css" class="skinswitcher" rel="stylesheet" type="text/css">
	<script src="./lib/fancytree-2.3.0/src/jquery.fancytree.js" type="text/javascript"></script>
	<script src="./lib/fancytree-2.3.0/src/jquery.fancytree.dnd.js" type="text/javascript"></script>
	<script src="./lib/fancytree-2.3.0/src/jquery.fancytree.table.js" type="text/javascript"></script>
	<script src="./lib/fancytree-2.3.0/src/jquery.fancytree.columnview.js" type="text/javascript"></script>

	<!-- HighChart -->
	<script src="./lib/Highcharts/highcharts.js"></script>
	<script src="./lib/Highcharts/modules/exporting.js"></script>

	<!-- flot chart -->
	<!--[if lte IE 8]><script language='javascript' type='text/javascript' src='./lib/flot/excanvas.min.js'></script><![endif]-->
	<script src='./lib/flot/jquery.flot.min.js' language='javascript' type='text/javascript'></script>
	<script src='./lib/flot/jquery.flot.time.min.js' language='javascript' type='text/javascript'></script>
	<script src='./lib/flot/jquery.flot.navigate.min.js' language='javascript' type='text/javascript'></script> 
	<script src='./lib/flot/jquery.flot.canvas.min.js' language='javascript' type='text/javascript'></script> 

	<!-- canvas2image -->
	<script src="./lib/canvas2image/base64.js"></script>
	<script src="./lib/canvas2image/canvas2image.js"></script>

	<!-- tigra calendar -->
	<script type="text/javascript" src="./lib/tigra_calendar/tcal.js"></script> 
	<link rel="stylesheet" type="text/css" href="./lib/tigra_calendar/tcal.css" />

	<!-- https://github.com/jacwright/date.format -->
	<script src="./lib/date_format/date.format.js"></script>

	<script src='./egiga2m.js' type='text/javascript'></script>

</body></html>

